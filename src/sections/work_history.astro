---
import Card from 'components/card.astro';
import Tag from 'components/tag.astro';
import { work_history } from 'data/work';
---

<section>
	<h2>Work history</h2>

	<div class="flex flex-col gap-16">
		{
			work_history.map(
				({
					start,
					end,
					title,
					business,
					business_href,
					description,
					tags,
				}) => (
					<Card>
						<small class="uppercase">
							{start} - {end ?? 'Current'}
						</small>
						<hgroup class="mb-4">
							<h3 class="mb-1">{title}</h3>
							{!!business && (
								<p class="text-xl">
									{business_href ? (
										<a href={business_href}>{business}</a>
									) : (
										business
									)}
								</p>
							)}
						</hgroup>
						{description.map(text => (
							<p>{text}</p>
						))}
						{!!tags.length && (
							<div class="flex gap-2 flex-wrap pt-2">
								{tags.sort().map(tag => (
									<Tag text={tag} />
								))}
							</div>
						)}
					</Card>
				),
			)
		}
	</div>
</section>
